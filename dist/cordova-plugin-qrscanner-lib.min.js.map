{"version":3,"file":"cordova-plugin-qrscanner-lib.min.js","mappings":"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","sources":["webpack://QRScanner/webpack/universalModuleDefinition","webpack://QRScanner/./src/browser/worker.min.js","webpack://QRScanner/./node_modules/sdp/sdp.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/utils.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://QRScanner/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://QRScanner/./src/browser/src/createQRScannerInternal.js","webpack://QRScanner/./src/browser/src/library.js","webpack://QRScanner/./src/common/src/createQRScannerAdapter.js","webpack://QRScanner/webpack/bootstrap","webpack://QRScanner/webpack/runtime/compat get default export","webpack://QRScanner/webpack/runtime/define property getters","webpack://QRScanner/webpack/runtime/hasOwnProperty shorthand","webpack://QRScanner/webpack/runtime/make namespace object","webpack://QRScanner/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"QRScanner\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"QRScanner\"] = factory();\n\telse\n\t\troot[\"QRScanner\"] = factory();\n})(self, () => {\nreturn ","export default \"(()=>{var t={918:(t,e,n)=>{\\\"use strict\\\";function i(t,e,n){this.ordinal_Renamed_Field=t,this.bits=e,this.name=n}n.d(e,{Z:()=>R}),i.prototype.ordinal=function(){return this.ordinal_Renamed_Field},i.forBits=function(t){if(t<0||t>=r.length)throw\\\"ArgumentException\\\";return r[t]};var r=[new i(1,0,\\\"M\\\"),new i(0,1,\\\"L\\\"),new i(3,2,\\\"H\\\"),new i(2,3,\\\"Q\\\")],o=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]],s=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];function a(t){this.errorCorrectionLevel=i.forBits(t>>3&3),this.dataMask=7&t}function h(t,e){if(e||(e=t),t<1||e<1)throw\\\"Both dimensions must be greater than 0\\\";this.width=t,this.height=e;var n=t>>5;0!=(31&t)&&n++,this.rowSize=n,this.bits=new Array(n*e);for(var i=0;i<this.bits.length;i++)this.bits[i]=0}function w(t,e){this.count=t,this.dataCodewords=e}function f(t,e,n){this.ecCodewordsPerBlock=t,this.ecBlocks=n?[e,n]:[e]}function u(t,e,n,i,r,o){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=[n,i,r,o];for(var s=0,a=n.ecCodewordsPerBlock,h=n.getECBlocks(),w=0;w<h.length;w++){var f=h[w];s+=f.count*(f.dataCodewords+a)}this.totalCodewords=s}function l(t,e,n){this.x=t,this.y=e,this.count=1,this.estimatedModuleSize=n}function d(t,e,n,i,r,o,s){this.image=t,this.possibleCenters=[],this.startX=e,this.startY=n,this.width=i,this.height=r,this.moduleSize=o,this.crossCheckStateCount=[0,0,0],this.resultPointCallback=s}a.prototype.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},a.prototype.Equals=function(t){var e=t;return this.errorCorrectionLevel==e.errorCorrectionLevel&&this.dataMask==e.dataMask},a.numBitsDiffering=function(t,e){return s[15&(t^=e)]+s[15&I(t,4)]+s[15&I(t,8)]+s[15&I(t,12)]+s[15&I(t,16)]+s[15&I(t,20)]+s[15&I(t,24)]+s[15&I(t,28)]},a.decodeFormatInformation=function(t){var e=a.doDecodeFormatInformation(t);return null!=e?e:a.doDecodeFormatInformation(21522^t)},a.doDecodeFormatInformation=function(t){for(var e=4294967295,n=0,i=0;i<o.length;i++){var r=o[i],s=r[0];if(s==t)return new a(r[1]);var h=this.numBitsDiffering(t,s);h<e&&(n=r[1],e=h)}return e<=3?new a(n):null},Object.defineProperty(h.prototype,\\\"Dimension\\\",{get:function(){if(this.width!=this.height)throw\\\"Can't call getDimension() on a non-square matrix\\\";return this.width}}),h.prototype.get_Renamed=function(t,e){var n=e*this.rowSize+(t>>5);return 0!=(1&I(this.bits[n],31&t))},h.prototype.set_Renamed=function(t,e){var n=e*this.rowSize+(t>>5);this.bits[n]|=1<<(31&t)},h.prototype.flip=function(t,e){var n=e*this.rowSize+(t>>5);this.bits[n]^=1<<(31&t)},h.prototype.clear=function(){for(var t=this.bits.length,e=0;e<t;e++)this.bits[e]=0},h.prototype.setRegion=function(t,e,n,i){if(e<0||t<0)throw\\\"Left and top must be nonnegative\\\";if(i<1||n<1)throw\\\"Height and width must be at least 1\\\";var r=t+n,o=e+i;if(o>this.height||r>this.width)throw\\\"The region must fit inside the matrix\\\";for(var s=e;s<o;s++)for(var a=s*this.rowSize,h=t;h<r;h++)this.bits[a+(h>>5)]|=1<<(31&h)},Object.defineProperty(f.prototype,\\\"TotalECCodewords\\\",{get:function(){return this.ecCodewordsPerBlock*this.NumBlocks}}),Object.defineProperty(f.prototype,\\\"NumBlocks\\\",{get:function(){for(var t=0,e=0;e<this.ecBlocks.length;e++)t+=this.ecBlocks[e].length;return t}}),f.prototype.getECBlocks=function(){return this.ecBlocks},Object.defineProperty(u.prototype,\\\"DimensionForVersion\\\",{get:function(){return 17+4*this.versionNumber}}),u.prototype.buildFunctionPattern=function(){var t=this.DimensionForVersion,e=new h(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var r=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)0==i&&(0==o||o==n-1)||i==n-1&&0==o||e.setRegion(this.alignmentPatternCenters[o]-2,r,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},u.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.ordinal()]},u.VERSION_DECODE_INFO=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017],u.VERSIONS=[new u(1,[],new f(7,new w(1,19)),new f(10,new w(1,16)),new f(13,new w(1,13)),new f(17,new w(1,9))),new u(2,[6,18],new f(10,new w(1,34)),new f(16,new w(1,28)),new f(22,new w(1,22)),new f(28,new w(1,16))),new u(3,[6,22],new f(15,new w(1,55)),new f(26,new w(1,44)),new f(18,new w(2,17)),new f(22,new w(2,13))),new u(4,[6,26],new f(20,new w(1,80)),new f(18,new w(2,32)),new f(26,new w(2,24)),new f(16,new w(4,9))),new u(5,[6,30],new f(26,new w(1,108)),new f(24,new w(2,43)),new f(18,new w(2,15),new w(2,16)),new f(22,new w(2,11),new w(2,12))),new u(6,[6,34],new f(18,new w(2,68)),new f(16,new w(4,27)),new f(24,new w(4,19)),new f(28,new w(4,15))),new u(7,[6,22,38],new f(20,new w(2,78)),new f(18,new w(4,31)),new f(18,new w(2,14),new w(4,15)),new f(26,new w(4,13),new w(1,14))),new u(8,[6,24,42],new f(24,new w(2,97)),new f(22,new w(2,38),new w(2,39)),new f(22,new w(4,18),new w(2,19)),new f(26,new w(4,14),new w(2,15))),new u(9,[6,26,46],new f(30,new w(2,116)),new f(22,new w(3,36),new w(2,37)),new f(20,new w(4,16),new w(4,17)),new f(24,new w(4,12),new w(4,13))),new u(10,[6,28,50],new f(18,new w(2,68),new w(2,69)),new f(26,new w(4,43),new w(1,44)),new f(24,new w(6,19),new w(2,20)),new f(28,new w(6,15),new w(2,16))),new u(11,[6,30,54],new f(20,new w(4,81)),new f(30,new w(1,50),new w(4,51)),new f(28,new w(4,22),new w(4,23)),new f(24,new w(3,12),new w(8,13))),new u(12,[6,32,58],new f(24,new w(2,92),new w(2,93)),new f(22,new w(6,36),new w(2,37)),new f(26,new w(4,20),new w(6,21)),new f(28,new w(7,14),new w(4,15))),new u(13,[6,34,62],new f(26,new w(4,107)),new f(22,new w(8,37),new w(1,38)),new f(24,new w(8,20),new w(4,21)),new f(22,new w(12,11),new w(4,12))),new u(14,[6,26,46,66],new f(30,new w(3,115),new w(1,116)),new f(24,new w(4,40),new w(5,41)),new f(20,new w(11,16),new w(5,17)),new f(24,new w(11,12),new w(5,13))),new u(15,[6,26,48,70],new f(22,new w(5,87),new w(1,88)),new f(24,new w(5,41),new w(5,42)),new f(30,new w(5,24),new w(7,25)),new f(24,new w(11,12),new w(7,13))),new u(16,[6,26,50,74],new f(24,new w(5,98),new w(1,99)),new f(28,new w(7,45),new w(3,46)),new f(24,new w(15,19),new w(2,20)),new f(30,new w(3,15),new w(13,16))),new u(17,[6,30,54,78],new f(28,new w(1,107),new w(5,108)),new f(28,new w(10,46),new w(1,47)),new f(28,new w(1,22),new w(15,23)),new f(28,new w(2,14),new w(17,15))),new u(18,[6,30,56,82],new f(30,new w(5,120),new w(1,121)),new f(26,new w(9,43),new w(4,44)),new f(28,new w(17,22),new w(1,23)),new f(28,new w(2,14),new w(19,15))),new u(19,[6,30,58,86],new f(28,new w(3,113),new w(4,114)),new f(26,new w(3,44),new w(11,45)),new f(26,new w(17,21),new w(4,22)),new f(26,new w(9,13),new w(16,14))),new u(20,[6,34,62,90],new f(28,new w(3,107),new w(5,108)),new f(26,new w(3,41),new w(13,42)),new f(30,new w(15,24),new w(5,25)),new f(28,new w(15,15),new w(10,16))),new u(21,[6,28,50,72,94],new f(28,new w(4,116),new w(4,117)),new f(26,new w(17,42)),new f(28,new w(17,22),new w(6,23)),new f(30,new w(19,16),new w(6,17))),new u(22,[6,26,50,74,98],new f(28,new w(2,111),new w(7,112)),new f(28,new w(17,46)),new f(30,new w(7,24),new w(16,25)),new f(24,new w(34,13))),new u(23,[6,30,54,74,102],new f(30,new w(4,121),new w(5,122)),new f(28,new w(4,47),new w(14,48)),new f(30,new w(11,24),new w(14,25)),new f(30,new w(16,15),new w(14,16))),new u(24,[6,28,54,80,106],new f(30,new w(6,117),new w(4,118)),new f(28,new w(6,45),new w(14,46)),new f(30,new w(11,24),new w(16,25)),new f(30,new w(30,16),new w(2,17))),new u(25,[6,32,58,84,110],new f(26,new w(8,106),new w(4,107)),new f(28,new w(8,47),new w(13,48)),new f(30,new w(7,24),new w(22,25)),new f(30,new w(22,15),new w(13,16))),new u(26,[6,30,58,86,114],new f(28,new w(10,114),new w(2,115)),new f(28,new w(19,46),new w(4,47)),new f(28,new w(28,22),new w(6,23)),new f(30,new w(33,16),new w(4,17))),new u(27,[6,34,62,90,118],new f(30,new w(8,122),new w(4,123)),new f(28,new w(22,45),new w(3,46)),new f(30,new w(8,23),new w(26,24)),new f(30,new w(12,15),new w(28,16))),new u(28,[6,26,50,74,98,122],new f(30,new w(3,117),new w(10,118)),new f(28,new w(3,45),new w(23,46)),new f(30,new w(4,24),new w(31,25)),new f(30,new w(11,15),new w(31,16))),new u(29,[6,30,54,78,102,126],new f(30,new w(7,116),new w(7,117)),new f(28,new w(21,45),new w(7,46)),new f(30,new w(1,23),new w(37,24)),new f(30,new w(19,15),new w(26,16))),new u(30,[6,26,52,78,104,130],new f(30,new w(5,115),new w(10,116)),new f(28,new w(19,47),new w(10,48)),new f(30,new w(15,24),new w(25,25)),new f(30,new w(23,15),new w(25,16))),new u(31,[6,30,56,82,108,134],new f(30,new w(13,115),new w(3,116)),new f(28,new w(2,46),new w(29,47)),new f(30,new w(42,24),new w(1,25)),new f(30,new w(23,15),new w(28,16))),new u(32,[6,34,60,86,112,138],new f(30,new w(17,115)),new f(28,new w(10,46),new w(23,47)),new f(30,new w(10,24),new w(35,25)),new f(30,new w(19,15),new w(35,16))),new u(33,[6,30,58,86,114,142],new f(30,new w(17,115),new w(1,116)),new f(28,new w(14,46),new w(21,47)),new f(30,new w(29,24),new w(19,25)),new f(30,new w(11,15),new w(46,16))),new u(34,[6,34,62,90,118,146],new f(30,new w(13,115),new w(6,116)),new f(28,new w(14,46),new w(23,47)),new f(30,new w(44,24),new w(7,25)),new f(30,new w(59,16),new w(1,17))),new u(35,[6,30,54,78,102,126,150],new f(30,new w(12,121),new w(7,122)),new f(28,new w(12,47),new w(26,48)),new f(30,new w(39,24),new w(14,25)),new f(30,new w(22,15),new w(41,16))),new u(36,[6,24,50,76,102,128,154],new f(30,new w(6,121),new w(14,122)),new f(28,new w(6,47),new w(34,48)),new f(30,new w(46,24),new w(10,25)),new f(30,new w(2,15),new w(64,16))),new u(37,[6,28,54,80,106,132,158],new f(30,new w(17,122),new w(4,123)),new f(28,new w(29,46),new w(14,47)),new f(30,new w(49,24),new w(10,25)),new f(30,new w(24,15),new w(46,16))),new u(38,[6,32,58,84,110,136,162],new f(30,new w(4,122),new w(18,123)),new f(28,new w(13,46),new w(32,47)),new f(30,new w(48,24),new w(14,25)),new f(30,new w(42,15),new w(32,16))),new u(39,[6,26,54,82,110,138,166],new f(30,new w(20,117),new w(4,118)),new f(28,new w(40,47),new w(7,48)),new f(30,new w(43,24),new w(22,25)),new f(30,new w(10,15),new w(67,16))),new u(40,[6,30,58,86,114,142,170],new f(30,new w(19,118),new w(6,119)),new f(28,new w(18,47),new w(31,48)),new f(30,new w(34,24),new w(34,25)),new f(30,new w(20,15),new w(61,16)))],u.getVersionForNumber=function(t){if(t<1||t>40)throw\\\"ArgumentException\\\";return u.VERSIONS[t-1]},u.getProvisionalVersionForDimension=function(t){if(t%4!=1)throw\\\"Error getProvisionalVersionForDimension\\\";try{return u.getVersionForNumber(t-17>>2)}catch(t){throw\\\"Error getVersionForNumber\\\"}},u.decodeVersionInformation=function(t){for(var e=4294967295,n=0,i=0;i<u.VERSION_DECODE_INFO.length;i++){var r=u.VERSION_DECODE_INFO[i];if(r==t)return this.getVersionForNumber(i+7);var o=a.numBitsDiffering(t,r);o<e&&(n=i+7,e=o)}return e<=3?this.getVersionForNumber(n):null},Object.defineProperty(l.prototype,\\\"X\\\",{get:function(){return Math.floor(this.x)}}),Object.defineProperty(l.prototype,\\\"Y\\\",{get:function(){return Math.floor(this.y)}}),l.prototype.incrementCount=function(){this.count++},l.prototype.aboutEquals=function(t,e,n){if(Math.abs(e-this.y)<=t&&Math.abs(n-this.x)<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i/this.estimatedModuleSize<=1}return!1},d.prototype.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},d.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,n=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=n)return!1;return!0},d.prototype.crossCheckVertical=function(t,e,n,i){var r=this.image,o=r.height,s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var a=t;a>=0&&r.data[e+a*r.width]&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&!r.data[e+a*r.width]&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=t+1;a<o&&r.data[e+a*r.width]&&s[1]<=n;)s[1]++,a++;if(a==o||s[1]>n)return NaN;for(;a<o&&!r.data[e+a*r.width]&&s[2]<=n;)s[2]++,a++;if(s[2]>n)return NaN;var h=s[0]+s[1]+s[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,a):NaN},d.prototype.handlePossibleCenter=function(t,e,n){var i=t[0]+t[1]+t[2],r=this.centerFromEnd(t,n),o=this.crossCheckVertical(e,Math.floor(r),2*t[1],i);if(!isNaN(o)){for(var s=(t[0]+t[1]+t[2])/3,a=this.possibleCenters.length,h=0;h<a;h++){if(this.possibleCenters[h].aboutEquals(s,o,r))return new l(r,o,s)}var w=new l(r,o,s);this.possibleCenters.push(w),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(w)}return null},d.prototype.find=function(){for(var t=this.image,e=this.startX,n=this.height,i=e+this.width,r=this.startY+(n>>1),o=[0,0,0],s=0;s<n;s++){var a=r+(0==(1&s)?s+1>>1:-(s+1>>1));o[0]=0,o[1]=0,o[2]=0;for(var h=e;h<i&&!t.data[h+t.width*a];)h++;for(var w=0;h<i;){if(t.data[h+a*t.width])if(1==w)o[w]++;else if(2==w){var f;if(this.foundPatternCross(o))if(null!=(f=this.handlePossibleCenter(o,a,h)))return f;o[0]=o[2],o[1]=1,o[2]=0,w=1}else o[++w]++;else 1==w&&w++,o[w]++;h++}if(this.foundPatternCross(o))if(null!=(f=this.handlePossibleCenter(o,a,i)))return f}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw\\\"Couldn't find enough alignment patterns\\\"};var c={checkAndNudgePoints:function(t,e){for(var n=t.width,i=t.height,r=!0,o=0;o<e.length&&r;o+=2){var s=Math.floor(e[o]),a=Math.floor(e[o+1]);if(s<-1||s>n||a<-1||a>i)throw\\\"Error.checkAndNudgePoints \\\";r=!1,-1==s?(e[o]=0,r=!0):s==n&&(e[o]=n-1,r=!0),-1==a?(e[o+1]=0,r=!0):a==i&&(e[o+1]=i-1,r=!0)}r=!0;for(o=e.length-2;o>=0&&r;o-=2){s=Math.floor(e[o]),a=Math.floor(e[o+1]);if(s<-1||s>n||a<-1||a>i)throw\\\"Error.checkAndNudgePoints \\\";r=!1,-1==s?(e[o]=0,r=!0):s==n&&(e[o]=n-1,r=!0),-1==a?(e[o+1]=0,r=!0):a==i&&(e[o+1]=i-1,r=!0)}},sampleGrid3:function(t,e,n){for(var i=new h(e),r=new Array(e<<1),o=0;o<e;o++){for(var s=r.length,a=o+.5,w=0;w<s;w+=2)r[w]=.5+(w>>1),r[w+1]=a;n.transformPoints1(r),c.checkAndNudgePoints(t,r);try{for(w=0;w<s;w+=2){t.data[Math.floor(r[w])+t.width*Math.floor(r[w+1])]&&i.set_Renamed(w>>1,o)}}catch(t){throw\\\"Error.checkAndNudgePoints\\\"}}return i}};const p=c;function g(t,e,n){this.x=t,this.y=e,this.count=1,this.estimatedModuleSize=n}function v(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}function m(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=[0,0,0,0,0],this.resultPointCallback=null}function b(t,e,n,i,r,o,s,a,h){this.a11=t,this.a12=i,this.a13=s,this.a21=e,this.a22=r,this.a23=a,this.a31=n,this.a32=o,this.a33=h}function y(t,e){this.bits=t,this.points=e}function C(t){this.image=t,this.resultPointCallback=null}function M(t,e){if(null==e||0==e.length)throw\\\"System.ArgumentException\\\";this.field=t;var n=e.length;if(n>1&&0==e[0]){for(var i=1;i<n&&0==e[i];)i++;if(i==n)this.coefficients=t.Zero.coefficients;else{this.coefficients=new Array(n-i);for(var r=0;r<this.coefficients.length;r++)this.coefficients[r]=0;for(var o=0;o<this.coefficients.length;o++)this.coefficients[o]=e[i+o]}}else this.coefficients=e}function k(t){this.expTable=new Array(256),this.logTable=new Array(256);for(var e=1,n=0;n<256;n++)this.expTable[n]=e,(e<<=1)>=256&&(e^=t);for(n=0;n<255;n++)this.logTable[this.expTable[n]]=n;var i=new Array(1);i[0]=0,this.zero=new M(this,new Array(i));var r=new Array(1);r[0]=1,this.one=new M(this,new Array(r))}function P(t){this.field=t}Object.defineProperty(g.prototype,\\\"X\\\",{get:function(){return this.x}}),Object.defineProperty(g.prototype,\\\"Y\\\",{get:function(){return this.y}}),g.prototype.incrementCount=function(){this.count++},g.prototype.aboutEquals=function(t,e,n){if(Math.abs(e-this.y)<=t&&Math.abs(n-this.x)<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i/this.estimatedModuleSize<=1}return!1},Object.defineProperty(m.prototype,\\\"CrossCheckStateCount\\\",{get:function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}}),m.prototype.foundPatternCross=function(t){for(var e=0,n=0;n<5;n++){var i=t[n];if(0==i)return!1;e+=i}if(e<7)return!1;var r=Math.floor((e<<8)/7),o=Math.floor(r/2);return Math.abs(r-(t[0]<<8))<o&&Math.abs(r-(t[1]<<8))<o&&Math.abs(3*r-(t[2]<<8))<3*o&&Math.abs(r-(t[3]<<8))<o&&Math.abs(r-(t[4]<<8))<o},m.prototype.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},m.prototype.crossCheckVertical=function(t,e,n,i){for(var r=this.image,o=r.height,s=this.CrossCheckStateCount,a=t;a>=0&&r.data[e+a*r.width];)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!r.data[e+a*r.width]&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&r.data[e+a*r.width]&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=t+1;a<o&&r.data[e+a*r.width];)s[2]++,a++;if(a==o)return NaN;for(;a<o&&!r.data[e+a*r.width]&&s[3]<n;)s[3]++,a++;if(a==o||s[3]>=n)return NaN;for(;a<o&&r.data[e+a*r.width]&&s[4]<n;)s[4]++,a++;if(s[4]>=n)return NaN;var h=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,a):NaN},m.prototype.crossCheckHorizontal=function(t,e,n,i){for(var r=this.image,o=r.width,s=this.CrossCheckStateCount,a=t;a>=0&&r.data[a+e*r.width];)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!r.data[a+e*r.width]&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&r.data[a+e*r.width]&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=t+1;a<o&&r.data[a+e*r.width];)s[2]++,a++;if(a==o)return NaN;for(;a<o&&!r.data[a+e*r.width]&&s[3]<n;)s[3]++,a++;if(a==o||s[3]>=n)return NaN;for(;a<o&&r.data[a+e*r.width]&&s[4]<n;)s[4]++,a++;if(s[4]>=n)return NaN;var h=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(h-i)>=i?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,a):NaN},m.prototype.handlePossibleCenter=function(t,e,n){var i=t[0]+t[1]+t[2]+t[3]+t[4],r=this.centerFromEnd(t,n),o=this.crossCheckVertical(e,Math.floor(r),t[2],i);if(!isNaN(o)&&(r=this.crossCheckHorizontal(Math.floor(r),Math.floor(o),t[2],i),!isNaN(r))){for(var s=i/7,a=!1,h=this.possibleCenters.length,w=0;w<h;w++){var f=this.possibleCenters[w];if(f.aboutEquals(s,o,r)){f.incrementCount(),a=!0;break}}if(!a){var u=new g(r,o,s);this.possibleCenters.push(u),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(u)}return!0}return!1},m.prototype.selectBestPatterns=function(){var t=this.possibleCenters.length;if(t<3)throw\\\"Couldn't find enough finder patterns:\\\"+t+\\\" patterns found\\\";if(t>3){for(var e=0,n=0,i=0;i<t;i++){var r=this.possibleCenters[i].estimatedModuleSize;e+=r,n+=r*r}var o=e/t;this.possibleCenters.sort((function(t,e){var n=Math.abs(e.estimatedModuleSize-o),i=Math.abs(t.estimatedModuleSize-o);return n<i?-1:n==i?0:1}));var s=Math.sqrt(n/t-o*o),a=Math.max(.2*o,s);for(i=this.possibleCenters-1;i>=0;i--){var h=this.possibleCenters[i];Math.abs(h.estimatedModuleSize-o)>a&&this.possibleCenters.splice(i,1)}}return this.possibleCenters.length>3&&this.possibleCenters.sort((function(t,e){return t.count>e.count?-1:t.count<e.count?1:0})),[this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2]]},m.prototype.findRowSkip=function(){var t=this.possibleCenters.length;if(t<=1)return 0;for(var e=null,n=0;n<t;n++){var i=this.possibleCenters[n];if(i.count>=2){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.X-i.X)-Math.abs(e.Y-i.Y))/2);e=i}}return 0},m.prototype.haveMultiplyConfirmedCenters=function(){for(var t=0,e=0,n=this.possibleCenters.length,i=0;i<n;i++){var r=this.possibleCenters[i];r.count>=2&&(t++,e+=r.estimatedModuleSize)}if(t<3)return!1;var o=e/n,s=0;for(i=0;i<n;i++)r=this.possibleCenters[i],s+=Math.abs(r.estimatedModuleSize-o);return s<=.05*e},m.prototype.findFinderPattern=function(t){this.image=t;var e=t.height,n=t.width,i=Math.floor(3*e/228);i<3&&(i=3);for(var r=!1,o=new Array(5),s=i-1;s<e&&!r;s+=i){o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0;for(var a=0,h=0;h<n;h++)if(t.data[h+s*t.width])1==(1&a)&&a++,o[a]++;else if(0==(1&a))if(4==a)if(this.foundPatternCross(o)){if(this.handlePossibleCenter(o,s,h))if(i=2,this.hasSkipped)r=this.haveMultiplyConfirmedCenters();else{var w=this.findRowSkip();w>o[2]&&(s+=w-o[2]-i,h=n-1)}else{do{h++}while(h<n&&!t.data[h+s*t.width]);h--}a=0,o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0}else o[0]=o[2],o[1]=o[3],o[2]=o[4],o[3]=1,o[4]=0,a=3;else o[++a]++;else o[a]++;if(this.foundPatternCross(o))this.handlePossibleCenter(o,s,n)&&(i=o[0],this.hasSkipped&&(r=this.haveMultiplyConfirmedCenters()))}var f=this.selectBestPatterns();return function(t){function e(t,e){var n=t.X-e.X,i=t.Y-e.Y;return Math.sqrt(n*n+i*i)}var n,i,r,o=e(t[0],t[1]),s=e(t[1],t[2]),a=e(t[0],t[2]);if(s>=o&&s>=a?(i=t[0],n=t[1],r=t[2]):a>=s&&a>=o?(i=t[1],n=t[0],r=t[2]):(i=t[2],n=t[0],r=t[1]),function(t,e,n){var i=e.x,r=e.y;return(n.x-i)*(t.y-r)-(n.y-r)*(t.x-i)}(n,i,r)<0){var h=n;n=r,r=h}t[0]=n,t[1]=i,t[2]=r}(f),new v(f)},b.prototype.transformPoints1=function(t){for(var e=t.length,n=this.a11,i=this.a12,r=this.a13,o=this.a21,s=this.a22,a=this.a23,h=this.a31,w=this.a32,f=this.a33,u=0;u<e;u+=2){var l=t[u],d=t[u+1],c=r*l+a*d+f;t[u]=(n*l+o*d+h)/c,t[u+1]=(i*l+s*d+w)/c}},b.prototype.transformPoints2=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i],o=e[i],s=this.a13*r+this.a23*o+this.a33;t[i]=(this.a11*r+this.a21*o+this.a31)/s,e[i]=(this.a12*r+this.a22*o+this.a32)/s}},b.prototype.buildAdjoint=function(){return new b(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},b.prototype.times=function(t){return new b(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},b.quadrilateralToQuadrilateral=function(t,e,n,i,r,o,s,a,h,w,f,u,l,d,c,p){var g=this.quadrilateralToSquare(t,e,n,i,r,o,s,a);return this.squareToQuadrilateral(h,w,f,u,l,d,c,p).times(g)},b.squareToQuadrilateral=function(t,e,n,i,r,o,s,a){var h=a-o,w=e-i+o-a;if(0==h&&0==w)return new b(n-t,r-n,t,i-e,o-i,e,0,0,1);var f=n-r,u=s-r,l=t-n+r-s,d=i-o,c=f*h-u*d,p=(l*h-u*w)/c,g=(f*w-l*d)/c;return new b(n-t+p*n,s-t+g*s,t,i-e+p*i,a-e+g*a,e,p,g,1)},b.quadrilateralToSquare=function(t,e,n,i,r,o,s,a){return this.squareToQuadrilateral(t,e,n,i,r,o,s,a).buildAdjoint()},C.prototype.sizeOfBlackWhiteBlackRun=function(t,e,n,i){var r=Math.abs(i-e)>Math.abs(n-t);if(r){var o=t;t=e,e=o,o=n,n=i,i=o}for(var s=Math.abs(n-t),a=Math.abs(i-e),h=-s>>1,w=e<i?1:-1,f=t<n?1:-1,u=0,l=t,d=e;l!=n;l+=f){var c=r?d:l,p=r?l:d;if(1==u?this.image.data[c+p*this.image.width]&&u++:this.image.data[c+p*this.image.width]||u++,3==u){var g=l-t,v=d-e;return Math.sqrt(g*g+v*v)}if((h+=a)>0){if(d==i)break;d+=w,h-=s}}var m=n-t,b=i-e;return Math.sqrt(m*m+b*b)},C.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,n,i){var r=this.sizeOfBlackWhiteBlackRun(t,e,n,i),o=1,s=t-(n-t);s<0?(o=t/(t-s),s=0):s>=this.image.width&&(o=(this.image.width-1-t)/(s-t),s=this.image.width-1);var a=Math.floor(e-(i-e)*o);return o=1,a<0?(o=e/(e-a),a=0):a>=this.image.height&&(o=(this.image.height-1-e)/(a-e),a=this.image.height-1),s=Math.floor(t+(s-t)*o),(r+=this.sizeOfBlackWhiteBlackRun(t,e,s,a))-1},C.prototype.calculateModuleSizeOneWay=function(t,e){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y)),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},C.prototype.calculateModuleSize=function(t,e,n){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,n))/2},C.prototype.distance=function(t,e){var n=t.X-e.X,i=t.Y-e.Y;return Math.sqrt(n*n+i*i)},C.prototype.computeDimension=function(t,e,n,i){var r=7+(Math.round(this.distance(t,e)/i)+Math.round(this.distance(t,n)/i)>>1);switch(3&r){case 0:r++;break;case 2:r--;break;case 3:throw\\\"Error\\\"}return r},C.prototype.findAlignmentInRegion=function(t,e,n,i){var r=Math.floor(i*t),o=Math.max(0,e-r),s=Math.min(this.image.width-1,e+r);if(s-o<3*t)throw\\\"Error\\\";var a=Math.max(0,n-r),h=Math.min(this.image.height-1,n+r);return new d(this.image,o,a,s-o,h-a,t,this.resultPointCallback).find()},C.prototype.createTransform=function(t,e,n,i,r){var o,s,a,h,w=r-3.5;return null!=i?(o=i.X,s=i.Y,a=h=w-3):(o=e.X-t.X+n.X,s=e.Y-t.Y+n.Y,a=h=w),b.quadrilateralToQuadrilateral(3.5,3.5,w,3.5,a,h,3.5,w,t.X,t.Y,e.X,e.Y,o,s,n.X,n.Y)},C.prototype.sampleGrid=function(t,e,n){return p.sampleGrid3(t,n,e)},C.prototype.processFinderPatternInfo=function(t){var e=t.topLeft,n=t.topRight,i=t.bottomLeft,r=this.calculateModuleSize(e,n,i);if(r<1)throw\\\"Error\\\";var o=this.computeDimension(e,n,i,r),s=u.getProvisionalVersionForDimension(o),a=s.DimensionForVersion-7,h=null;if(s.alignmentPatternCenters.length>0)for(var w=n.X-e.X+i.X,f=n.Y-e.Y+i.Y,l=1-3/a,d=Math.floor(e.X+l*(w-e.X)),c=Math.floor(e.Y+l*(f-e.Y)),p=4;p<=16;p<<=1){h=this.findAlignmentInRegion(r,d,c,p);break}var g=this.createTransform(e,n,i,h,o);return new y(this.sampleGrid(this.image,g,o),null==h?[i,e,n]:[i,e,n,h])},C.prototype.detect=function(){var t=(new m).findFinderPattern(this.image);return this.processFinderPatternInfo(t)},Object.defineProperty(M.prototype,\\\"Zero\\\",{get:function(){return 0==this.coefficients[0]}}),Object.defineProperty(M.prototype,\\\"Degree\\\",{get:function(){return this.coefficients.length-1}}),M.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},M.prototype.evaluateAt=function(t){if(0==t)return this.getCoefficient(0);var e=this.coefficients.length;if(1==t){for(var n=0,i=0;i<e;i++)n=this.field.addOrSubtract(n,this.coefficients[i]);return n}var r=this.coefficients[0];for(i=1;i<e;i++)r=this.field.addOrSubtract(this.field.multiply(t,r),this.coefficients[i]);return r},M.prototype.addOrSubtract=function(t){if(this.field!=t.field)throw\\\"GF256Polys do not have same GF256 field\\\";if(this.Zero)return t;if(t.Zero)return this;var e=this.coefficients,n=t.coefficients;if(e.length>n.length){var i=e;e=n,n=i}for(var r=new Array(n.length),o=n.length-e.length,s=0;s<o;s++)r[s]=n[s];for(var a=o;a<n.length;a++)r[a]=this.field.addOrSubtract(e[a-o],n[a]);return new M(this.field,r)},M.prototype.multiply1=function(t){if(this.field!=t.field)throw\\\"GF256Polys do not have same GF256 field\\\";if(this.Zero||t.Zero)return this.field.Zero;for(var e=this.coefficients,n=e.length,i=t.coefficients,r=i.length,o=new Array(n+r-1),s=0;s<n;s++)for(var a=e[s],h=0;h<r;h++)o[s+h]=this.field.addOrSubtract(o[s+h],this.field.multiply(a,i[h]));return new M(this.field,o)},M.prototype.multiply2=function(t){if(0==t)return this.field.Zero;if(1==t)return this;for(var e=this.coefficients.length,n=new Array(e),i=0;i<e;i++)n[i]=this.field.multiply(this.coefficients[i],t);return new M(this.field,n)},M.prototype.multiplyByMonomial=function(t,e){if(t<0)throw\\\"System.ArgumentException\\\";if(0==e)return this.field.Zero;for(var n=this.coefficients.length,i=new Array(n+t),r=0;r<i.length;r++)i[r]=0;for(r=0;r<n;r++)i[r]=this.field.multiply(this.coefficients[r],e);return new M(this.field,i)},M.prototype.divide=function(t){if(this.field!=t.field)throw\\\"GF256Polys do not have same GF256 field\\\";if(t.Zero)throw\\\"Divide by 0\\\";for(var e=this.field.Zero,n=this,i=t.getCoefficient(t.Degree),r=this.field.inverse(i);n.Degree>=t.Degree&&!n.Zero;){var o=n.Degree-t.Degree,s=this.field.multiply(n.getCoefficient(n.Degree),r),a=t.multiplyByMonomial(o,s),h=this.field.buildMonomial(o,s);e=e.addOrSubtract(h),n=n.addOrSubtract(a)}return[e,n]},Object.defineProperty(k.prototype,\\\"Zero\\\",{get:function(){return this.zero}}),Object.defineProperty(k.prototype,\\\"One\\\",{get:function(){return this.one}}),k.prototype.buildMonomial=function(t,e){if(t<0)throw\\\"System.ArgumentException\\\";if(0==e)return this.zero;for(var n=new Array(t+1),i=0;i<n.length;i++)n[i]=0;return n[0]=e,new M(this,n)},k.prototype.exp=function(t){return this.expTable[t]},k.prototype.log=function(t){if(0==t)throw\\\"System.ArgumentException\\\";return this.logTable[t]},k.prototype.inverse=function(t){if(0==t)throw\\\"System.ArithmeticException\\\";return this.expTable[255-this.logTable[t]]},k.prototype.addOrSubtract=function(t,e){return t^e},k.prototype.multiply=function(t,e){return 0==t||0==e?0:1==t?e:1==e?t:this.expTable[(this.logTable[t]+this.logTable[e])%255]},k.QR_CODE_FIELD=new k(285),k.DATA_MATRIX_FIELD=new k(301),P.prototype.decode=function(t,e){for(var n=new M(this.field,t),i=new Array(e),r=0;r<i.length;r++)i[r]=0;var o=!0;for(r=0;r<e;r++){var s=n.evaluateAt(this.field.exp(r));i[i.length-1-r]=s,0!=s&&(o=!1)}if(!o){var a=new M(this.field,i),h=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),w=h[0],f=h[1],u=this.findErrorLocations(w),l=this.findErrorMagnitudes(f,u,false);for(r=0;r<u.length;r++){var d=t.length-1-this.field.log(u[r]);if(d<0)throw\\\"ReedSolomonException Bad error location\\\";t[d]=k.prototype.addOrSubtract(t[d],l[r])}}},P.prototype.runEuclideanAlgorithm=function(t,e,n){if(t.Degree<e.Degree){var i=t;t=e,e=i}for(var r=t,o=e,s=this.field.One,a=this.field.Zero,h=this.field.Zero,w=this.field.One;o.Degree>=Math.floor(n/2);){var f=r,u=s,l=h;if(s=a,h=w,(r=o).Zero)throw\\\"r_{i-1} was zero\\\";o=f;for(var d=this.field.Zero,c=r.getCoefficient(r.Degree),p=this.field.inverse(c);o.Degree>=r.Degree&&!o.Zero;){var g=o.Degree-r.Degree,v=this.field.multiply(o.getCoefficient(o.Degree),p);d=d.addOrSubtract(this.field.buildMonomial(g,v)),o=o.addOrSubtract(r.multiplyByMonomial(g,v))}a=d.multiply1(s).addOrSubtract(u),w=d.multiply1(h).addOrSubtract(l)}var m=w.getCoefficient(0);if(0==m)throw\\\"ReedSolomonException sigmaTilde(0) was zero\\\";var b=this.field.inverse(m);return[w.multiply2(b),o.multiply2(b)]},P.prototype.findErrorLocations=function(t){var e=t.Degree;if(1==e)return new Array(t.getCoefficient(1));for(var n=new Array(e),i=0,r=1;r<256&&i<e;r++)0==t.evaluateAt(r)&&(n[i]=this.field.inverse(r),i++);if(i!=e)throw\\\"Error locator degree does not match number of roots\\\";return n},P.prototype.findErrorMagnitudes=function(t,e,n){for(var i=e.length,r=new Array(i),o=0;o<i;o++){for(var s=this.field.inverse(e[o]),a=1,h=0;h<i;h++)o!=h&&(a=this.field.multiply(a,k.prototype.addOrSubtract(1,this.field.multiply(e[h],s))));r[o]=this.field.multiply(t.evaluateAt(s),this.field.inverse(a)),n&&(r[o]=this.field.multiply(r[o],s))}return r};var N={};N.forReference=function(t){if(t<0||t>7)throw\\\"System.ArgumentException\\\";return N.DATA_MASKS[t]},N.DATA_MASKS=[new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){return 0==(t+e&1)}},new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){return 0==(1&t)}},new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){return e%3==0}},new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){return(t+e)%3==0}},new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){return 0==(I(t,1)+e/3&1)}},new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){var n=t*e;return(1&n)+n%3==0}},new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){var n=t*e;return 0==((1&n)+n%3&1)}},new function(){this.unmaskBitMatrix=function(t,e){for(var n=0;n<e;n++)for(var i=0;i<e;i++)this.isMasked(n,i)&&t.flip(i,n)},this.isMasked=function(t,e){return 0==((t+e&1)+t*e%3&1)}}];const S=N;function B(t){var e=t.Dimension;if(e<21||1!=(3&e))throw\\\"Error BitMatrixParser\\\";this.bitMatrix=t,this.parsedVersion=null,this.parsedFormatInfo=null}function A(t,e){this.numDataCodewords=t,this.codewords=e}function E(t,e,n){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=t,this.numErrorCorrectionCode=n,e<=9?this.dataLengthMode=0:e>=10&&e<=26?this.dataLengthMode=1:e>=27&&e<=40&&(this.dataLengthMode=2)}B.prototype.copyBit=function(t,e,n){return this.bitMatrix.get_Renamed(t,e)?n<<1|1:n<<1},B.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var n=5;n>=0;n--)t=this.copyBit(8,n,t);if(this.parsedFormatInfo=a.decodeFormatInformation(t),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var i=this.bitMatrix.Dimension;t=0;var r=i-8;for(e=i-1;e>=r;e--)t=this.copyBit(e,8,t);for(n=i-7;n<i;n++)t=this.copyBit(8,n,t);if(this.parsedFormatInfo=a.decodeFormatInformation(t),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw\\\"Error readFormatInformation\\\"},B.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var t=this.bitMatrix.Dimension,e=t-17>>2;if(e<=6)return u.getVersionForNumber(e);for(var n=0,i=t-11,r=5;r>=0;r--)for(var o=t-9;o>=i;o--)n=this.copyBit(o,r,n);if(this.parsedVersion=u.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==t)return this.parsedVersion;n=0;for(o=5;o>=0;o--)for(r=t-9;r>=i;r--)n=this.copyBit(o,r,n);if(this.parsedVersion=u.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==t)return this.parsedVersion;throw\\\"Error readVersion\\\"},B.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),n=S.forReference(t.dataMask),i=this.bitMatrix.Dimension;n.unmaskBitMatrix(this.bitMatrix,i);for(var r=e.buildFunctionPattern(),o=!0,s=new Array(e.totalCodewords),a=0,h=0,w=0,f=i-1;f>0;f-=2){6==f&&f--;for(var u=0;u<i;u++)for(var l=o?i-1-u:u,d=0;d<2;d++)r.get_Renamed(f-d,l)||(w++,h<<=1,this.bitMatrix.get_Renamed(f-d,l)&&(h|=1),8==w&&(s[a++]=h,w=0,h=0));o^=!0}if(a!=e.totalCodewords)throw\\\"Error readCodewords\\\";return s},A.getDataBlocks=function(t,e,n){if(t.length!=e.totalCodewords)throw\\\"ArgumentException\\\";for(var i=e.getECBlocksForLevel(n),r=0,o=i.getECBlocks(),s=0;s<o.length;s++)r+=o[s].count;for(var a=new Array(r),h=0,w=0;w<o.length;w++){var f=o[w];for(s=0;s<f.count;s++){var u=f.dataCodewords,l=i.ecCodewordsPerBlock+u;a[h++]=new A(u,new Array(l))}}for(var d=a[0].codewords.length,c=a.length-1;c>=0;){if(a[c].codewords.length==d)break;c--}c++;var p=d-i.ecCodewordsPerBlock,g=0;for(s=0;s<p;s++)for(w=0;w<h;w++)a[w].codewords[s]=t[g++];for(w=c;w<h;w++)a[w].codewords[p]=t[g++];var v=a[0].codewords.length;for(s=p;s<v;s++)for(w=0;w<h;w++){var m=w<c?s:s+1;a[w].codewords[m]=t[g++]}return a},E.prototype.getNextBits=function(t){var e=0;if(t<this.bitPointer+1){for(var n=0,i=0;i<t;i++)n+=1<<i;return n<<=this.bitPointer-t+1,e=(this.blocks[this.blockPointer]&n)>>this.bitPointer-t+1,this.bitPointer-=t,e}if(t<this.bitPointer+1+8){var r=0;for(i=0;i<this.bitPointer+1;i++)r+=1<<i;return e=(this.blocks[this.blockPointer]&r)<<t-(this.bitPointer+1),this.blockPointer++,e+=this.blocks[this.blockPointer]>>8-(t-(this.bitPointer+1)),this.bitPointer=this.bitPointer-t%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),e}if(t<this.bitPointer+1+16){r=0;var o=0;for(i=0;i<this.bitPointer+1;i++)r+=1<<i;var s=(this.blocks[this.blockPointer]&r)<<t-(this.bitPointer+1);this.blockPointer++;var a=this.blocks[this.blockPointer]<<t-(this.bitPointer+1+8);this.blockPointer++;for(i=0;i<t-(this.bitPointer+1+8);i++)o+=1<<i;return o<<=8-(t-(this.bitPointer+1+8)),e=s+a+((this.blocks[this.blockPointer]&o)>>8-(t-(this.bitPointer+1+8))),this.bitPointer=this.bitPointer-(t-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),e}return 0},E.prototype.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},E.prototype.getDataLength=function(t){for(var e=0;t>>e!=1;)e++;return this.getNextBits(F.sizeOfDataLengthInfo[this.dataLengthMode][e])},E.prototype.getRomanAndFigureString=function(t){var e=t,n=0,i=\\\"\\\",r=[\\\"0\\\",\\\"1\\\",\\\"2\\\",\\\"3\\\",\\\"4\\\",\\\"5\\\",\\\"6\\\",\\\"7\\\",\\\"8\\\",\\\"9\\\",\\\"A\\\",\\\"B\\\",\\\"C\\\",\\\"D\\\",\\\"E\\\",\\\"F\\\",\\\"G\\\",\\\"H\\\",\\\"I\\\",\\\"J\\\",\\\"K\\\",\\\"L\\\",\\\"M\\\",\\\"N\\\",\\\"O\\\",\\\"P\\\",\\\"Q\\\",\\\"R\\\",\\\"S\\\",\\\"T\\\",\\\"U\\\",\\\"V\\\",\\\"W\\\",\\\"X\\\",\\\"Y\\\",\\\"Z\\\",\\\" \\\",\\\"$\\\",\\\"%\\\",\\\"*\\\",\\\"+\\\",\\\"-\\\",\\\".\\\",\\\"/\\\",\\\":\\\"];do{if(e>1)n=this.getNextBits(11),i+=r[Math.floor(n/45)],i+=r[n%45],e-=2;else 1==e&&(i+=r[n=this.getNextBits(6)],e-=1)}while(e>0);return i},E.prototype.getFigureString=function(t){var e=t,n=0,i=\\\"\\\";do{e>=3?((n=this.getNextBits(10))<100&&(i+=\\\"0\\\"),n<10&&(i+=\\\"0\\\"),e-=3):2==e?((n=this.getNextBits(7))<10&&(i+=\\\"0\\\"),e-=2):1==e&&(n=this.getNextBits(4),e-=1),i+=n}while(e>0);return i},E.prototype.get8bitByteArray=function(t){var e=t,n=0,i=[];do{n=this.getNextBits(8),i.push(n),e--}while(e>0);return i},E.prototype.getKanjiString=function(t){var e=t,n=0,i=\\\"\\\";do{var r=((n=this.getNextBits(13))/192<<8)+n%192,o=0;o=r+33088<=40956?r+33088:r+49472,i+=String.fromCharCode(o),e--}while(e>0);return i},Object.defineProperty(E.prototype,\\\"DataByte\\\",{get:function(){for(var t=[];;){var e=this.NextMode();if(0==e){if(t.length>0)break;throw\\\"Empty data block\\\"}if(1!=e&&2!=e&&4!=e&&8!=e&&7!=e)throw\\\"Invalid mode: \\\"+e+\\\" in (block:\\\"+this.blockPointer+\\\" bit:\\\"+this.bitPointer+\\\")\\\";var n=this.getDataLength(e);if(n<1)throw\\\"Invalid data length: \\\"+n;switch(e){case 1:for(var i=this.getFigureString(n),r=new Array(i.length),o=0;o<i.length;o++)r[o]=i.charCodeAt(o);t.push(r);break;case 2:for(i=this.getRomanAndFigureString(n),r=new Array(i.length),o=0;o<i.length;o++)r[o]=i.charCodeAt(o);t.push(r);break;case 4:var s=this.get8bitByteArray(n);t.push(s);break;case 8:i=this.getKanjiString(n);t.push(i)}}return t}});var x={};x.rsDecoder=new P(k.QR_CODE_FIELD),x.correctErrors=function(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;r++)i[r]=255&t[r];var o=t.length-e;try{x.rsDecoder.decode(i,o)}catch(t){throw t}for(r=0;r<e;r++)t[r]=i[r]},x.decode=function(t){for(var e=new B(t),n=e.readVersion(),i=e.readFormatInformation().errorCorrectionLevel,r=e.readCodewords(),o=A.getDataBlocks(r,n,i),s=0,a=0;a<o.length;a++)s+=o[a].numDataCodewords;for(var h=new Array(s),w=0,f=0;f<o.length;f++){var u=o[f],l=u.codewords,d=u.numDataCodewords;x.correctErrors(l,d);for(a=0;a<d;a++)h[w++]=l[a]}return new E(h,n.versionNumber,i.bits)};const D=x;var F={};function O(){this.imagedata=null,this.width=0,this.height=0,this.qrCodeSymbol=null,this.debug=!1,this.callback=null}function I(t,e){return t>=0?t>>e:(t>>e)+(2<<~e)}F.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],O.prototype.decode=function(t,e){var n=function(){try{this.error=void 0,this.result=this.process(this.imagedata)}catch(t){this.error=t,this.result=void 0}return null!=this.callback&&this.callback(this.error,this.result),this.result}.bind(this);if(null!=t&&null!=t.width)this.width=t.width,this.height=t.height,this.imagedata={data:e||t.data},this.imagedata.width=t.width,this.imagedata.height=t.height,n();else{if(\\\"undefined\\\"==typeof Image)throw new Error(\\\"This source format is not supported in your environment, you need to pass an image buffer with width and height (see https://github.com/edi9999/jsqrcode/blob/master/test/qrcode.js)\\\");var i=new Image;i.crossOrigin=\\\"Anonymous\\\",i.onload=function(){var t=document.createElement(\\\"canvas\\\"),e=t.getContext(\\\"2d\\\"),r=document.getElementById(\\\"out-canvas\\\");if(null!=r){var o=r.getContext(\\\"2d\\\");o.clearRect(0,0,320,240),o.drawImage(i,0,0,320,240)}t.width=i.width,t.height=i.height,e.drawImage(i,0,0),this.width=i.width,this.height=i.height;try{this.imagedata=e.getImageData(0,0,i.width,i.height)}catch(t){if(this.result=\\\"Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!\\\",null!=this.callback)return this.callback(null,this.result)}n()}.bind(this),i.src=t}},O.prototype.decode_utf8=function(t){return decodeURIComponent(escape(t))},O.prototype.process=function(t){for(var e=(new Date).getTime(),n=new C(this.grayScaleToBitmap(this.grayscale(t))).detect(),i=D.decode(n.bits).DataByte,r=\\\"\\\",o=0;o<i.length;o++)for(var s=0;s<i[o].length;s++)r+=String.fromCharCode(i[o][s]);var a=(new Date).getTime()-e;return this.debug&&console.log(\\\"QR Code processing time (ms): \\\"+a),{result:this.decode_utf8(r),points:n.points}},O.prototype.getPixel=function(t,e,n){if(t.width<e)throw\\\"point error\\\";if(t.height<n)throw\\\"point error\\\";var i=4*e+n*t.width*4;return(33*t.data[i]+34*t.data[i+1]+33*t.data[i+2])/100},O.prototype.binarize=function(t){for(var e=new Array(this.width*this.height),n=0;n<this.height;n++)for(var i=0;i<this.width;i++){var r=this.getPixel(i,n);e[i+n*this.width]=r<=t}return e},O.prototype.getMiddleBrightnessPerArea=function(t){for(var e=Math.floor(t.width/4),n=Math.floor(t.height/4),i=new Array(4),r=0;r<4;r++){i[r]=new Array(4);for(var o=0;o<4;o++)i[r][o]=[0,0]}for(var s=0;s<4;s++)for(var a=0;a<4;a++){i[a][s][0]=255;for(var h=0;h<n;h++)for(var w=0;w<e;w++){var f=t.data[e*a+w+(n*s+h)*t.width];f<i[a][s][0]&&(i[a][s][0]=f),f>i[a][s][1]&&(i[a][s][1]=f)}}for(var u=new Array(4),l=0;l<4;l++)u[l]=new Array(4);for(s=0;s<4;s++)for(a=0;a<4;a++)u[a][s]=Math.floor((i[a][s][0]+i[a][s][1])/2);return u},O.prototype.grayScaleToBitmap=function(t){for(var e=this.getMiddleBrightnessPerArea(t),n=e.length,i=Math.floor(t.width/n),r=Math.floor(t.height/n),o=0;o<n;o++)for(var s=0;s<n;s++)for(var a=0;a<r;a++)for(var h=0;h<i;h++)t.data[i*s+h+(r*o+a)*t.width]=t.data[i*s+h+(r*o+a)*t.width]<e[s][o];return t},O.prototype.grayscale=function(t){for(var e=new Array(t.width*t.height),n=0;n<t.height;n++)for(var i=0;i<t.width;i++){var r=this.getPixel(t,i,n);e[i+n*t.width]=r}return{height:t.height,width:t.width,data:e}};const R=O},893:(t,e,n)=>{t=n.nmd(t),t={};var i=new(0,n(918).Z);i.callback=function(t,e){postMessage({result:e,err:t})},onmessage=function(t){var e=t.data;i.decode(e)}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i](o,o.exports,n),o.loaded=!0,o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);n(893)})();\";","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substr(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substr(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","require('webrtc-adapter');\r\nvar workerScript = require(\"raw-loader!../worker.min.js\");\r\n\r\nmodule.exports = function(){\r\n\r\n  var ELEMENTS = {\r\n    preview: 'cordova-plugin-qrscanner-video-preview',\r\n    still: 'cordova-plugin-qrscanner-still'\r\n  };\r\n  var ZINDEXES = {\r\n    preview: -100,\r\n    still: -99\r\n  };\r\n  var backCamera = null;\r\n  var frontCamera = null;\r\n  var currentCamera = 0;\r\n  var activeMediaStream = null;\r\n  var scanning = false;\r\n  var previewing = false;\r\n  var scanWorker = null;\r\n  var thisScanCycle = null;\r\n  var nextScan = null;\r\n  var cancelNextScan = null;\r\n\r\n  // standard screen widths/heights, from 4k down to 320x240\r\n  // widths and heights are each tested separately to account for screen rotation\r\n  var standardWidthsAndHeights = [\r\n    5120, 4096, 3840, 3440, 3200, 3072, 3000, 2880, 2800, 2736, 2732, 2560,\r\n    2538, 2400, 2304, 2160, 2100, 2048, 2000, 1920, 1856, 1824, 1800, 1792,\r\n    1776, 1728, 1700, 1680, 1600, 1536, 1440, 1400, 1392, 1366, 1344, 1334,\r\n    1280, 1200, 1152, 1136, 1120, 1080, 1050, 1024, 1000, 960, 900, 854, 848,\r\n    832, 800, 768, 750, 720, 640, 624, 600, 576, 544, 540, 512, 480, 320, 240\r\n  ];\r\n\r\n  var facingModes = [\r\n    'environment',\r\n    'user'\r\n  ];\r\n\r\n  //utils\r\n  function killStream(mediaStream){\r\n    mediaStream.getTracks().forEach(function(track){\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  // For performance, we test best-to-worst constraints. Once we find a match,\r\n  // we move to the next test. Since `ConstraintNotSatisfiedError`s are thrown\r\n  // much faster than streams can be started and stopped, the scan is much\r\n  // faster, even though it may iterate through more constraint objects.\r\n  function getCameraSpecsById(deviceId){\r\n\r\n    // return a getUserMedia Constraints\r\n    function getConstraintObj(deviceId, facingMode, width, height){\r\n      var obj = { audio: false, video: {} };\r\n      obj.video.deviceId = {exact: deviceId};\r\n      if(facingMode) {\r\n        obj.video.facingMode = {exact: facingMode};\r\n      }\r\n      if(width) {\r\n        obj.video.width = {exact: width};\r\n      }\r\n      if(height) {\r\n        obj.video.height = {exact: height};\r\n      }\r\n      return obj;\r\n    }\r\n\r\n    var facingModeConstraints = facingModes.map(function(mode){\r\n    \treturn getConstraintObj(deviceId, mode);\r\n    });\r\n    var widthConstraints = standardWidthsAndHeights.map(function(width){\r\n    \treturn getConstraintObj(deviceId, null, width);\r\n    });\r\n    var heightConstraints = standardWidthsAndHeights.map(function(height){\r\n    \treturn getConstraintObj(deviceId, null, null, height);\r\n    });\r\n\r\n    // create a promise which tries to resolve the best constraints for this deviceId\r\n    // rather than reject, failures return a value of `null`\r\n    function getFirstResolvingConstraint(constraintsBestToWorst){\r\n      return new Promise(function(resolveBestConstraints){\r\n        // build a chain of promises which either resolves or continues searching\r\n        return constraintsBestToWorst.reduce(function(chain, next){\r\n          return chain.then(function(searchState){\r\n            if(searchState.found){\r\n              // The best working constraint was found. Skip further tests.\r\n              return searchState;\r\n            } else {\r\n              searchState.nextConstraint = next;\r\n              return window.navigator.mediaDevices.getUserMedia(searchState.nextConstraint).then(function(mediaStream){\r\n                // We found the first working constraint object, now we can stop\r\n                // the stream and short-circuit the search.\r\n                killStream(mediaStream);\r\n                searchState.found = true;\r\n                return searchState;\r\n              }, function(){\r\n                // didn't get a media stream. The search continues:\r\n                return searchState;\r\n              });\r\n            }\r\n          });\r\n        }, Promise.resolve({\r\n          // kick off the search:\r\n          found: false,\r\n          nextConstraint: {}\r\n        })).then(function(searchState){\r\n          if(searchState.found){\r\n            resolveBestConstraints(searchState.nextConstraint);\r\n          } else {\r\n            resolveBestConstraints(null);\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    return getFirstResolvingConstraint(facingModeConstraints).then(function(facingModeSpecs){\r\n      return getFirstResolvingConstraint(widthConstraints).then(function(widthSpecs){\r\n        return getFirstResolvingConstraint(heightConstraints).then(function(heightSpecs){\r\n          return {\r\n            deviceId: deviceId,\r\n            facingMode: facingModeSpecs === null ? null : facingModeSpecs.video.facingMode.exact,\r\n            width: widthSpecs === null ? null : widthSpecs.video.width.exact,\r\n            height: heightSpecs === null ? null : heightSpecs.video.height.exact\r\n          };\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  function chooseCameras(){\r\n    var devices = window.navigator.mediaDevices.enumerateDevices();\r\n    return devices.then(function(mediaDeviceInfoList){\r\n      var videoDeviceIds = mediaDeviceInfoList.filter(function(elem){\r\n        return elem.kind === 'videoinput';\r\n      }).map(function(elem){\r\n        return elem.deviceId;\r\n      });\r\n      return videoDeviceIds;\r\n    }).then(function(videoDeviceIds){\r\n      // there is no standardized way for us to get the specs of each camera\r\n      // (due to concerns over user fingerprinting), so we're forced to\r\n      // iteratively test each camera for it's capabilities\r\n      var searches = [];\r\n      videoDeviceIds.forEach(function(id){\r\n        searches.push(getCameraSpecsById(id));\r\n      });\r\n      return Promise.all(searches);\r\n    }).then(function(cameraSpecsArray){\r\n      return cameraSpecsArray.filter(function(camera){\r\n        // filter out any cameras where width and height could not be captured\r\n        if(camera !== null && camera.width !== null && camera.height !== null){\r\n          return true;\r\n        }\r\n      }).sort(function(a, b){\r\n        // sort cameras from highest resolution (by width) to lowest\r\n        return b.width - a.width;\r\n      });\r\n    }).then(function(bestToWorstCameras){\r\n      var backCamera = null,\r\n          frontCamera = null;\r\n      // choose backCamera\r\n      for(var i = 0; i < bestToWorstCameras.length; i++){\r\n        if (bestToWorstCameras[i].facingMode === 'environment'){\r\n          backCamera = bestToWorstCameras[i];\r\n          // (shouldn't be used for frontCamera)\r\n          bestToWorstCameras.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n      // if no back-facing cameras were found, choose the highest resolution\r\n      if(backCamera === null){\r\n        if(bestToWorstCameras.length > 0){\r\n          backCamera = bestToWorstCameras[0];\r\n          // (shouldn't be used for frontCamera)\r\n          bestToWorstCameras.splice(0, 1);\r\n        } else {\r\n          // user doesn't have any available cameras\r\n          backCamera = false;\r\n        }\r\n      }\r\n      if(bestToWorstCameras.length > 0){\r\n        // frontCamera should simply be the next-best resolution camera\r\n        frontCamera = bestToWorstCameras[0];\r\n      } else {\r\n        // user doesn't have any more cameras\r\n        frontCamera = false;\r\n      }\r\n      return {\r\n        backCamera: backCamera,\r\n        frontCamera: frontCamera\r\n      };\r\n    });\r\n  }\r\n\r\n  function mediaStreamIsActive(){\r\n    return activeMediaStream !== null;\r\n  }\r\n\r\n  function killActiveMediaStream(){\r\n    killStream(activeMediaStream);\r\n    activeMediaStream = null;\r\n  }\r\n\r\n  function getVideoPreview(){\r\n    return document.getElementById(ELEMENTS.preview);\r\n  }\r\n\r\n  function getImg(){\r\n    return document.getElementById(ELEMENTS.still);\r\n  }\r\n\r\n  function getCurrentCameraIndex(){\r\n    return currentCamera;\r\n  }\r\n\r\n  function getCurrentCamera(){\r\n    return currentCamera === 1 ? frontCamera : backCamera;\r\n  }\r\n\r\n  function bringStillToFront(){\r\n    var img = getImg();\r\n    if(img){\r\n      img.style.visibility = 'visible';\r\n      previewing = false;\r\n    }\r\n  }\r\n\r\n  function bringPreviewToFront(){\r\n    var img = getImg();\r\n    if(img){\r\n      img.style.visibility = 'hidden';\r\n      previewing = true;\r\n    }\r\n  }\r\n\r\n  function isInitialized(){\r\n    return backCamera !== null;\r\n  }\r\n\r\n  function canChangeCamera(){\r\n    return !!backCamera && !!frontCamera;\r\n  }\r\n\r\n  function calcStatus(){\r\n    return {\r\n      // !authorized means the user either has no camera or has denied access.\r\n      // This would leave a value of `null` before prepare(), and `false` after.\r\n      authorized: (backCamera !== null && backCamera !== false)? '1': '0',\r\n      // No applicable API\r\n      denied: '0',\r\n      // No applicable API\r\n      restricted: '0',\r\n      prepared: isInitialized() ? '1' : '0',\r\n      scanning: scanning? '1' : '0',\r\n      previewing: previewing? '1' : '0',\r\n      // We leave this true after prepare() to match the mobile experience as\r\n      // closely as possible. (Without additional covering, the preview will\r\n      // always be visible to the user).\r\n      showing: getVideoPreview()? '1' : '0',\r\n      // No applicable API\r\n      lightEnabled: '0',\r\n      // No applicable API\r\n      canOpenSettings: '0',\r\n      // No applicable API\r\n      canEnableLight: '0',\r\n      canChangeCamera: canChangeCamera() ? '1' : '0',\r\n      currentCamera: currentCamera.toString()\r\n    };\r\n  }\r\n\r\n  function startCamera(success, error){\r\n      var currentCameraIndex = getCurrentCameraIndex();\r\n      var currentCamera = getCurrentCamera();\r\n      window.navigator.mediaDevices.getUserMedia({\r\n        audio: false,\r\n        video: {\r\n          deviceId: {exact: currentCamera.deviceId},\r\n          width: {ideal: currentCamera.width},\r\n          height: {ideal: currentCamera.height}\r\n        }\r\n      }).then(function(mediaStream){\r\n        activeMediaStream = mediaStream;\r\n        var video = getVideoPreview();\r\n        video.src = URL.createObjectURL(mediaStream);\r\n        success(calcStatus());\r\n      }, function(err){\r\n        // something bad happened\r\n        err = null;\r\n        var code = currentCameraIndex? 4 : 3;\r\n        error(code); // FRONT_CAMERA_UNAVAILABLE : BACK_CAMERA_UNAVAILABLE\r\n      });\r\n  }\r\n\r\n  function getTempCanvasAndContext(videoElement){\r\n    var tempCanvas = document.createElement('canvas');\r\n    var camera = getCurrentCamera();\r\n    tempCanvas.height = camera.height;\r\n    tempCanvas.width = camera.width;\r\n    var tempCanvasContext = tempCanvas.getContext('2d');\r\n    tempCanvasContext.drawImage(videoElement, 0, 0, camera.width, camera.height);\r\n    return {\r\n      canvas: tempCanvas,\r\n      context: tempCanvasContext\r\n    };\r\n  }\r\n\r\n  function getCurrentImageData(videoElement){\r\n    var snapshot = getTempCanvasAndContext(videoElement);\r\n    return snapshot.context.getImageData(0, 0, snapshot.canvas.width, snapshot.canvas.height);\r\n  }\r\n\r\n  // take a screenshot of the video preview with a temp canvas\r\n  function captureCurrentFrame(videoElement){\r\n    return getTempCanvasAndContext(videoElement).canvas.toDataURL('image/png');\r\n  }\r\n\r\n  function initialize(success, error){\r\n    if(scanWorker === null){\r\n      var workerBlob = new Blob([workerScript],{type: \"text/javascript\"});\r\n      scanWorker = new Worker(URL.createObjectURL(workerBlob));\r\n    }\r\n    if(!getVideoPreview()){\r\n      // prepare DOM (sync)\r\n      var videoPreview = document.createElement('video');\r\n      videoPreview.setAttribute('autoplay', 'autoplay');\r\n      videoPreview.setAttribute('id', ELEMENTS.preview);\r\n      videoPreview.setAttribute('style', 'display:block;position:fixed;top:50%;left:50%;' +\r\n      'width:auto;height:auto;min-width:100%;min-height:100%;z-index:' + ZINDEXES.preview +\r\n      ';-moz-transform: translateX(-50%) translateY(-50%);-webkit-transform: ' +\r\n      'translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);' +\r\n      'background-size:cover;background-position:50% 50%;background-color:#FFF;');\r\n      videoPreview.addEventListener('loadeddata', function(){\r\n        bringPreviewToFront();\r\n      });\r\n\r\n      var stillImg = document.createElement('div');\r\n      stillImg.setAttribute('id', ELEMENTS.still);\r\n      stillImg.setAttribute('style', 'display:block;position:fixed;top:50%;left:50%;visibility: hidden;' +\r\n      'width:auto;height:auto;min-width:100%;min-height:100%;z-index:' + ZINDEXES.still +\r\n      ';-moz-transform: translateX(-50%) translateY(-50%);-webkit-transform: ' +\r\n      'translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);' +\r\n      'background-size:cover;background-position:50% 50%;background-color:#FFF;');\r\n\r\n      document.body.appendChild(videoPreview);\r\n      document.body.appendChild(stillImg);\r\n    }\r\n    if(backCamera === null){\r\n      // set instance cameras\r\n      chooseCameras().then(function(cameras){\r\n        backCamera = cameras.backCamera;\r\n        frontCamera = cameras.frontCamera;\r\n        if(backCamera !== false){\r\n          success();\r\n        } else {\r\n          error(5); // CAMERA_UNAVAILABLE\r\n        }\r\n      }, function(err){\r\n        // something bad happened\r\n        err = null;\r\n        error(0); // UNEXPECTED_ERROR\r\n      });\r\n    } else if (backCamera === false){\r\n      error(5); // CAMERA_UNAVAILABLE\r\n    } else {\r\n      success();\r\n    }\r\n  }\r\n\r\n  /*\r\n   *  --- Begin Public API ---\r\n   */\r\n\r\n  function prepare(success, error){\r\n    initialize(function(){\r\n      // return status on success\r\n      success(calcStatus());\r\n    },\r\n    // pass errors through\r\n    error);\r\n  }\r\n\r\n  function show(success, error){\r\n    function showCamera(){\r\n      if(!mediaStreamIsActive()){\r\n        startCamera(success, error);\r\n      } else {\r\n        success(calcStatus());\r\n      }\r\n    }\r\n    if(!isInitialized()){\r\n      initialize(function(){\r\n        // on successful initialization, attempt to showCamera\r\n        showCamera();\r\n      },\r\n      // pass errors through\r\n      error);\r\n    } else {\r\n      showCamera();\r\n    }\r\n  }\r\n\r\n  function hide(success, error){\r\n    error = null; // should never error\r\n    if(mediaStreamIsActive()){\r\n      killActiveMediaStream();\r\n    }\r\n    var video = getVideoPreview();\r\n    if(video){\r\n      video.src = '';\r\n    }\r\n    success(calcStatus());\r\n  }\r\n\r\n  function scan(success, error) {\r\n    // initialize and start video preview if not already active\r\n    show(function(ignore){\r\n      // ignore success output  `scan` method callback should be passed the decoded data\r\n      ignore = null;\r\n      var video = getVideoPreview();\r\n      var returned = false;\r\n      scanning = true;\r\n      scanWorker.onmessage = function(event){\r\n        var obj = event.data;\r\n        if(obj.result && !returned){\r\n          returned = true;\r\n          thisScanCycle = null;\r\n          success(obj.result);\r\n        }\r\n      };\r\n      thisScanCycle = function(){\r\n        scanWorker.postMessage(getCurrentImageData(video));\r\n        if(cancelNextScan !== null){\r\n          // avoid race conditions, always clear before starting a cycle\r\n          cancelNextScan();\r\n        }\r\n        // interval in milliseconds at which to try decoding the QR code\r\n        var SCAN_INTERVAL = window.QRScanner_SCAN_INTERVAL || 130;\r\n        // this value can be adjusted on-the-fly (while a scan is active) to\r\n        // balance scan speed vs. CPU/power usage\r\n        nextScan = window.setTimeout(thisScanCycle, SCAN_INTERVAL);\r\n        cancelNextScan = function(sendError){\r\n          window.clearTimeout(nextScan);\r\n          nextScan = null;\r\n          cancelNextScan = null;\r\n          if(sendError){\r\n            error(6); // SCAN_CANCELED\r\n          }\r\n        };\r\n      };\r\n      thisScanCycle();\r\n    }, error);\r\n  }\r\n\r\n  function cancelScan(success, error){\r\n    error = null; // should never error\r\n    if(cancelNextScan !== null){\r\n      cancelNextScan(true);\r\n    }\r\n    scanning = false;\r\n    if(typeof success === \"function\"){\r\n      success(calcStatus());\r\n    }\r\n  }\r\n\r\n  function pausePreview(success, error){\r\n    error = null; // should never error\r\n    if(mediaStreamIsActive()){\r\n      // pause scanning too\r\n      if(cancelNextScan !== null){\r\n        cancelNextScan();\r\n      }\r\n      var video = getVideoPreview();\r\n      video.pause();\r\n      var img = new Image();\r\n      img.src = captureCurrentFrame(video);\r\n      getImg().style.backgroundImage = 'url(' + img.src + ')';\r\n      bringStillToFront();\r\n      // kill the active stream to turn off the privacy light (the screenshot\r\n      // in the stillImg will remain visible)\r\n      killActiveMediaStream();\r\n      success(calcStatus());\r\n    } else {\r\n      success(calcStatus());\r\n    }\r\n  }\r\n\r\n  function resumePreview(success, error){\r\n    // if a scan was happening, resume it\r\n    if(thisScanCycle !== null){\r\n      thisScanCycle();\r\n    }\r\n    show(success, error);\r\n  }\r\n\r\n  function enableLight(success, error){\r\n    error(7); //LIGHT_UNAVAILABLE\r\n  }\r\n\r\n  function disableLight(success, error){\r\n    error(7); //LIGHT_UNAVAILABLE\r\n  }\r\n\r\n  function useCamera(success, error, array){\r\n    var requestedCamera = array[0];\r\n    var initialized = isInitialized();\r\n    if(requestedCamera !== currentCamera){\r\n      if(initialized && requestedCamera === 1 && !canChangeCamera()){\r\n          error(4); //FRONT_CAMERA_UNAVAILABLE\r\n      } else {\r\n        currentCamera = requestedCamera;\r\n        if(initialized){\r\n          hide(function(status){\r\n            // Don't need this one\r\n            status = null;\r\n          });\r\n          show(success, error);\r\n        } else {\r\n          success(calcStatus());\r\n        }\r\n      }\r\n    } else {\r\n      success(calcStatus());\r\n    }\r\n  }\r\n\r\n  function openSettings(success, error){\r\n    error(8); //OPEN_SETTINGS_UNAVAILABLE\r\n  }\r\n\r\n  function getStatus(success, error){\r\n    error = null; // should never error\r\n    success(calcStatus());\r\n  }\r\n\r\n  // Reset all instance variables to their original state.\r\n  // This method might be useful in cases where a new camera is available, and\r\n  // the application needs to force the plugin to chooseCameras() again.\r\n  function destroy(success, error){\r\n    error = null; // should never error\r\n    cancelScan();\r\n    if(mediaStreamIsActive()){\r\n      killActiveMediaStream();\r\n    }\r\n    backCamera = null;\r\n    frontCamera = null;\r\n    var preview = getVideoPreview();\r\n    var still = getImg();\r\n    if(preview){\r\n      preview.remove();\r\n    }\r\n    if(still){\r\n      still.remove();\r\n    }\r\n    success(calcStatus());\r\n  }\r\n\r\n  return {\r\n      prepare: prepare,\r\n      show: show,\r\n      hide: hide,\r\n      scan: scan,\r\n      cancelScan: cancelScan,\r\n      pausePreview: pausePreview,\r\n      resumePreview: resumePreview,\r\n      enableLight: enableLight,\r\n      disableLight: disableLight,\r\n      useCamera: useCamera,\r\n      openSettings: openSettings,\r\n      getStatus: getStatus,\r\n      destroy: destroy\r\n  };\r\n};\r\n","function QRScanner() {\r\n  var createQRScannerAdapter = require('../../common/src/createQRScannerAdapter.js');\r\n  var createQRScannerInternal = require('./createQRScannerInternal.js');\r\n\r\n  var internal = createQRScannerInternal();\r\n  var functionList = {\r\n      prepare: internal.prepare,\r\n      show: internal.show,\r\n      hide: internal.hide,\r\n      scan: internal.scan,\r\n      cancelScan: internal.cancelScan,\r\n      pausePreview: internal.pausePreview,\r\n      resumePreview: internal.resumePreview,\r\n      enableLight: internal.enableLight,\r\n      disableLight: internal.disableLight,\r\n      useCamera: internal.useCamera,\r\n      openSettings: internal.openSettings,\r\n      getStatus: internal.getStatus,\r\n      destroy: internal.destroy\r\n  };\r\n\r\n  // always returns an executable function for use by the internal component\r\n  // if a callback is provided, use it\r\n  function getFunc(callback){\r\n    if(typeof callback === \"function\"){\r\n      return callback;\r\n    }\r\n    return function(){\r\n      // callback is not needed\r\n      return;\r\n    };\r\n  }\r\n\r\n  // shim cordova's functionality for library usage\r\n  var shimCordova = {\r\n    exec: function(successCallback, errorCallback, className, functionName, inputArray){\r\n      if(className !== 'QRScanner' || !functionList[functionName]){\r\n        return errorCallback(0);\r\n      }\r\n      if(inputArray){\r\n        functionList[functionName](getFunc(successCallback), getFunc(errorCallback), inputArray);\r\n      } else {\r\n        functionList[functionName](getFunc(successCallback), getFunc(errorCallback));\r\n      }\r\n    }\r\n  };\r\n\r\n  var adapter = createQRScannerAdapter(shimCordova);\r\n  return adapter;\r\n}\r\n\r\nmodule.exports = new QRScanner();\r\n","module.exports = function createQRScanner(cordova){\r\n// The native implementations should return their status as ['string':'string']\r\n// dictionaries. Boolean values are encoded to '0' and '1', respectively.\r\nfunction stringToBool(string) {\r\n  switch (string) {\r\n    case '1':\r\n      return true;\r\n    case '0':\r\n      return false;\r\n    default:\r\n    throw new Error('QRScanner plugin returned an invalid boolean number-string: ' + string);\r\n  }\r\n}\r\n\r\n// Converts the returned ['string':'string'] dictionary to a status object.\r\nfunction convertStatus(statusDictionary) {\r\n  return {\r\n    authorized: stringToBool(statusDictionary.authorized),\r\n    denied: stringToBool(statusDictionary.denied),\r\n    restricted: stringToBool(statusDictionary.restricted),\r\n    prepared: stringToBool(statusDictionary.prepared),\r\n    scanning: stringToBool(statusDictionary.scanning),\r\n    previewing: stringToBool(statusDictionary.previewing),\r\n    showing: stringToBool(statusDictionary.showing),\r\n    lightEnabled: stringToBool(statusDictionary.lightEnabled),\r\n    canOpenSettings: stringToBool(statusDictionary.canOpenSettings),\r\n    canEnableLight: stringToBool(statusDictionary.canEnableLight),\r\n    canChangeCamera: stringToBool(statusDictionary.canChangeCamera),\r\n    currentCamera: parseInt(statusDictionary.currentCamera)\r\n  };\r\n}\r\n\r\n// Simple utility method to ensure the background is transparent. Used by the\r\n// plugin to force re-rendering immediately after the native webview background\r\n// is made transparent.\r\nfunction clearBackground() {\r\n  var body = document.body;\r\n  if (body.style) {\r\n    body.style.backgroundColor = 'rgba(0,0,0,0.01)';\r\n    body.style.backgroundImage = '';\r\n    setTimeout(function() {\r\n      body.style.backgroundColor = 'transparent';\r\n    }, 1);\r\n    if (body.parentNode && body.parentNode.style) {\r\n      body.parentNode.style.backgroundColor = 'transparent';\r\n      body.parentNode.style.backgroundImage = '';\r\n    }\r\n  }\r\n}\r\n\r\nfunction errorCallback(callback) {\r\n  if (!callback) {\r\n    return null;\r\n  }\r\n  return function(error) {\r\n    var errorCode = parseInt(error);\r\n    var QRScannerError = {};\r\n    switch (errorCode) {\r\n      case 0:\r\n        QRScannerError = {\r\n          name: 'UNEXPECTED_ERROR',\r\n          code: 0,\r\n          _message: 'QRScanner experienced an unexpected error.'\r\n        };\r\n        break;\r\n      case 1:\r\n        QRScannerError = {\r\n          name: 'CAMERA_ACCESS_DENIED',\r\n          code: 1,\r\n          _message: 'The user denied camera access.'\r\n        };\r\n        break;\r\n      case 2:\r\n        QRScannerError = {\r\n          name: 'CAMERA_ACCESS_RESTRICTED',\r\n          code: 2,\r\n          _message: 'Camera access is restricted.'\r\n        };\r\n        break;\r\n      case 3:\r\n        QRScannerError = {\r\n          name: 'BACK_CAMERA_UNAVAILABLE',\r\n          code: 3,\r\n          _message: 'The back camera is unavailable.'\r\n        };\r\n        break;\r\n      case 4:\r\n        QRScannerError = {\r\n          name: 'FRONT_CAMERA_UNAVAILABLE',\r\n          code: 4,\r\n          _message: 'The front camera is unavailable.'\r\n        };\r\n        break;\r\n      case 5:\r\n        QRScannerError = {\r\n          name: 'CAMERA_UNAVAILABLE',\r\n          code: 5,\r\n          _message: 'The camera is unavailable.'\r\n        };\r\n        break;\r\n      case 6:\r\n        QRScannerError = {\r\n          name: 'SCAN_CANCELED',\r\n          code: 6,\r\n          _message: 'Scan was canceled.'\r\n        };\r\n        break;\r\n      case 7:\r\n        QRScannerError = {\r\n          name: 'LIGHT_UNAVAILABLE',\r\n          code: 7,\r\n          _message: 'The device light is unavailable.'\r\n        };\r\n        break;\r\n      case 8:\r\n        // Open settings is only available on iOS 8.0+.\r\n        QRScannerError = {\r\n          name: 'OPEN_SETTINGS_UNAVAILABLE',\r\n          code: 8,\r\n          _message: 'The device is unable to open settings.'\r\n        };\r\n        break;\r\n      default:\r\n        QRScannerError = {\r\n          name: 'UNEXPECTED_ERROR',\r\n          code: 0,\r\n          _message: 'QRScanner returned an invalid error code.'\r\n        };\r\n        break;\r\n    }\r\n    callback(QRScannerError);\r\n  };\r\n}\r\n\r\nfunction successCallback(callback) {\r\n  if (!callback) {\r\n    return null;\r\n  }\r\n  return function(statusDict) {\r\n    callback(null, convertStatus(statusDict));\r\n  };\r\n}\r\n\r\nfunction doneCallback(callback, clear) {\r\n  if (!callback) {\r\n    return null;\r\n  }\r\n  return function(statusDict) {\r\n    if (clear) {\r\n      clearBackground();\r\n    }\r\n    callback(convertStatus(statusDict));\r\n  };\r\n}\r\n\r\nreturn {\r\n  prepare: function(callback, options) {\r\n    cordova.exec(successCallback(callback), errorCallback(callback), 'QRScanner', 'prepare', options ? [options] : []);\r\n  },\r\n  destroy: function(callback) {\r\n    cordova.exec(doneCallback(callback, true), null, 'QRScanner', 'destroy', []);\r\n  },\r\n  scan: function(callback, options) {\r\n    if (!callback) {\r\n      throw new Error('No callback provided to scan method.');\r\n    }\r\n    var success = function(result) {\r\n      callback(null, result);\r\n    };\r\n    cordova.exec(success, errorCallback(callback), 'QRScanner', 'scan', options ? [options] : []);\r\n  },\r\n  cancelScan: function(callback) {\r\n    cordova.exec(doneCallback(callback), null, 'QRScanner', 'cancelScan', []);\r\n  },\r\n  show: function(callback) {\r\n    cordova.exec(doneCallback(callback, true), null, 'QRScanner', 'show', []);\r\n  },\r\n  hide: function(callback) {\r\n    cordova.exec(doneCallback(callback, true), null, 'QRScanner', 'hide', []);\r\n  },\r\n  pausePreview: function(callback) {\r\n    cordova.exec(doneCallback(callback), null, 'QRScanner', 'pausePreview', []);\r\n  },\r\n  resumePreview: function(callback) {\r\n    cordova.exec(doneCallback(callback), null, 'QRScanner', 'resumePreview', []);\r\n  },\r\n  enableLight: function(callback) {\r\n    cordova.exec(successCallback(callback), errorCallback(callback), 'QRScanner', 'enableLight', []);\r\n  },\r\n  disableLight: function(callback) {\r\n    cordova.exec(successCallback(callback), errorCallback(callback), 'QRScanner', 'disableLight', []);\r\n  },\r\n  useCamera: function(index, callback) {\r\n    cordova.exec(successCallback(callback), errorCallback(callback), 'QRScanner', 'useCamera', [index]);\r\n  },\r\n  useFrontCamera: function(callback) {\r\n    var frontCamera = 1;\r\n    if (callback) {\r\n      this.useCamera(frontCamera, callback);\r\n    } else {\r\n      cordova.exec(null, null, 'QRScanner', 'useCamera', [frontCamera]);\r\n    }\r\n  },\r\n  useBackCamera: function(callback) {\r\n    var backCamera = 0;\r\n    if (callback) {\r\n      this.useCamera(backCamera, callback);\r\n    } else {\r\n      cordova.exec(null, null, 'QRScanner', 'useCamera', [backCamera]);\r\n    }\r\n  },\r\n  openSettings: function(callback) {\r\n    if (callback) {\r\n      cordova.exec(successCallback(callback), errorCallback(callback), 'QRScanner', 'openSettings', []);\r\n    } else {\r\n      cordova.exec(null, null, 'QRScanner', 'openSettings', []);\r\n    }\r\n  },\r\n  getStatus: function(callback) {\r\n    if (!callback) {\r\n      throw new Error('No callback provided to getStatus method.');\r\n    }\r\n    cordova.exec(doneCallback(callback), null, 'QRScanner', 'getStatus', []);\r\n  }\r\n};\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(943);\n"],"names":["root","factory","exports","module","define","amd","self","SDPUtils","Math","random","toString","substr","localCName","generateIdentifier","splitLines","blob","trim","split","map","line","splitSections","part","index","getDescription","sections","getMediaSections","shift","matchPrefix","prefix","filter","indexOf","parseCandidate","parts","substring","candidate","foundation","component","protocol","toLowerCase","priority","parseInt","ip","address","port","type","i","length","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","undefined","writeCandidate","sdp","push","toUpperCase","join","parseIceOptions","parseRtpMap","parsed","payloadType","name","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","id","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","Object","keys","params","forEach","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","value","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","slice","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","iceLite","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","obj","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","stream","track","planB","msidParts","parseSctpDescription","parseMLine","maxSizeLine","maxMessageSize","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","sessionId","version","getDirection","getKind","isRejected","parseOLine","username","sessionVersion","netType","addressType","isValidSDP","charAt","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","wrapPeerConnectionEvent","window","eventNameToWrap","wrapper","RTCPeerConnection","proto","prototype","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","this","arguments","wrappedCallback","e","modifiedEvent","handleEvent","_eventMap","Map","set","nativeRemoveEventListener","removeEventListener","has","unwrappedCb","get","delete","size","defineProperty","enumerable","configurable","disableLog","bool","Error","disableWarnings","log","console","deprecated","oldMethod","newMethod","warn","isObject","val","call","compactObject","data","reduce","accumulator","key","isObj","isEmptyObject","assign","walkStats","stats","base","resultSet","endsWith","filterStats","result","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","logging","shimGetUserMedia","browserDetails","navigator","mediaDevices","constraintsToChrome_","c","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","oc","mix","advanced","concat","shimConstraints_","constraints","func","audio","remap","a","b","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","devices","dev","d","find","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","error","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","receiver","getReceivers","event","Event","transceiver","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","splice","origAddStream","addStream","origRemoveStream","removeStream","s","RTCRtpSender","origGetSenders","senders","shimGetStats","origGetStats","getStats","selector","onSucc","onErr","fixChromeStats_","response","standardReport","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","successCallbackWrapper_","resolve","shimSenderReceiverGetStats","RTCRtpReceiver","origGetReceivers","receivers","srcElement","MediaStreamTrack","err","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","signalingState","t","alreadyExists","oldStream","method","nativeMethod","methodObj","args","desc","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","streamid","shimPeerConnection","webkitRTCPeerConnection","RTCIceCandidate","fixNegotiationNeeded","target","getConfiguration","sdpSemantics","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","code","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","test","rid","TypeError","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","encodings","setParameters","catch","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","createOffer","all","finally","shimCreateAnswer","origCreateAnswer","createAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","addIceCandidate","successCallback","failureCallback","options","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","hasOwnProperty","urls","url","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","setDirection","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","toJSON","sdpMid","sdpMLineIndex","writable","shimMaxMessageSize","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","browser","getMaxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","send","byteLength","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeExtmapAllowMixed","nativeSRD","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","shimParameterlessSetLocalDescription","nativeSetLocalDescription","adapter","shimChrome","shimFirefox","shimSafari","mozGetUserMedia","userAgent","isSecureContext","RTCIceGatherer","supportsUnifiedPlan","RTCRtpTransceiver","commonShim","browserShim","adapterFactory","workerScript","ELEMENTS","ZINDEXES","backCamera","frontCamera","currentCamera","activeMediaStream","scanning","previewing","scanWorker","thisScanCycle","nextScan","cancelNextScan","standardWidthsAndHeights","facingModes","killStream","mediaStream","chooseCameras","mediaDeviceInfoList","elem","videoDeviceIds","searches","getConstraintObj","facingModeConstraints","mode","widthConstraints","heightConstraints","getFirstResolvingConstraint","constraintsBestToWorst","resolveBestConstraints","chain","next","searchState","found","nextConstraint","facingModeSpecs","widthSpecs","heightSpecs","getCameraSpecsById","cameraSpecsArray","camera","sort","bestToWorstCameras","mediaStreamIsActive","killActiveMediaStream","getVideoPreview","document","getElementById","getImg","getCurrentCameraIndex","getCurrentCamera","isInitialized","canChangeCamera","calcStatus","authorized","denied","restricted","prepared","showing","lightEnabled","canOpenSettings","canEnableLight","getTempCanvasAndContext","videoElement","tempCanvas","createElement","tempCanvasContext","getContext","drawImage","canvas","context","initialize","success","workerBlob","Blob","Worker","URL","createObjectURL","videoPreview","setAttribute","img","style","visibility","stillImg","body","appendChild","cameras","show","showCamera","currentCameraIndex","src","startCamera","hide","cancelScan","prepare","scan","ignore","returned","onmessage","snapshot","postMessage","getImageData","SCAN_INTERVAL","QRScanner_SCAN_INTERVAL","setTimeout","sendError","clearTimeout","pausePreview","pause","Image","toDataURL","backgroundImage","bringStillToFront","resumePreview","enableLight","disableLight","useCamera","array","requestedCamera","initialized","status","openSettings","getStatus","destroy","preview","still","remove","createQRScannerAdapter","internal","createQRScannerInternal","functionList","getFunc","callback","exec","errorCallback","className","functionName","inputArray","cordova","stringToBool","string","convertStatus","statusDictionary","QRScannerError","_message","statusDict","doneCallback","clear","backgroundColor","parentNode","useFrontCamera","useBackCamera","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","definition","o","prop","Symbol","toStringTag"],"sourceRoot":""}